DROP DATABASE IF EXISTS httpstats_clients;
CREATE DATABASE httpstats_clients;
USE httpstats_clients;
SET GLOBAL innodb_file_per_table=1;
SET GLOBAL innodb_file_format=Barracuda;
SET GLOBAL innodb_compression_level=9;
SET GLOBAL tx_isolation = 'READ-COMMITTED';
CREATE TABLE ips               ( id INT NOT NULL AUTO_INCREMENT PRIMARY KEY, ipv4 INT UNSIGNED NOT NULL UNIQUE ) ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=16;
CREATE TABLE locations         ( id INT NOT NULL AUTO_INCREMENT PRIMARY KEY, name VARCHAR(3) NOT NULL UNIQUE) ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=16;
CREATE TABLE browsers          ( id INT NOT NULL AUTO_INCREMENT, name VARCHAR(255) NOT NULL, version VARCHAR(255) NOT NULL,  UNIQUE KEY `id` (`id`),  UNIQUE  KEY `name_version_uniq` (`name`,`version`)) ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=16;
CREATE TABLE devices           ( id INT NOT NULL AUTO_INCREMENT, name VARCHAR(255) NOT NULL, version VARCHAR(255) NOT NULL,  UNIQUE KEY `id` (`id`),  UNIQUE  KEY `name_version_uniq` (`name`,`version`)) ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=16;
CREATE TABLE oses              ( id INT NOT NULL AUTO_INCREMENT, name VARCHAR(255) NOT NULL, UNIQUE KEY `id` (`id`),         UNIQUE KEY `name` (`name`) )  ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=16;
CREATE TABLE visits_hourly     ( id INT NOT NULL AUTO_INCREMENT, date DATETIME NOT NULL, domains_id INT NOT NULL, ip_id INT NOT NULL, count INT NOT NULL, KEY `date` (`date`),      UNIQUE KEY `id` (`id`),         UNIQUE KEY `date_domains_ip_count` ( `date`, `domains_id`, `ip_id`, `count` )) ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=16;
CREATE TABLE locations_hourly  ( id INT NOT NULL AUTO_INCREMENT, date DATETIME NOT NULL, domains_id INT NOT NULL, country_id INT NOT NULL, count INT NOT NULL, KEY `date` (`date`), UNIQUE KEY `id` (`id`), UNIQUE KEY `date_domains_location_count` ( `date`, `domains_id`, `country_id`, `count` )) ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=16;
CREATE TABLE browsers_hourly   ( id INT NOT NULL AUTO_INCREMENT, date DATETIME NOT NULL, domains_id INT NOT NULL, browser_id INT NOT NULL,  count INT NOT NULL, KEY `date` (`date`),  UNIQUE KEY `id` (`id`),   UNIQUE KEY `date_domains_browser_count` ( `date`, `domains_id`, `browser_id`, `count` ))  ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=16;
CREATE TABLE devices_hourly    ( id INT NOT NULL AUTO_INCREMENT, date DATETIME NOT NULL, domains_id INT NOT NULL, device_id INT NOT NULL,  count INT NOT NULL,  KEY `date` (`date`),  UNIQUE KEY `id` (`id`),   UNIQUE KEY `date_domains_devices_count` ( `date`, `domains_id`, `device_id`, `count` ))  ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=16;
CREATE TABLE oses_hourly       ( id INT NOT NULL AUTO_INCREMENT, date DATETIME NOT NULL, domains_id INT NOT NULL, os_id INT NOT NULL, count INT NOT NULL, KEY `date` (`date`), UNIQUE KEY `id` (`id`), UNIQUE KEY `date_domains_os_count` ( `date`, `domains_id`, `os_id`, `count` )) ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=16;
CREATE TABLE visits_daily      ( id INT NOT NULL AUTO_INCREMENT, date DATETIME NOT NULL, domains_id INT NOT NULL, ip_id INT NOT NULL, count INT NOT NULL, KEY `date` (`date`),        UNIQUE KEY `id` (`id`),         UNIQUE KEY `date_domains_ip_count` ( `date`, `domains_id`, `ip_id`, `count` )) ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=16;
CREATE TABLE locations_daily   ( id INT NOT NULL AUTO_INCREMENT, date DATETIME NOT NULL, domains_id INT NOT NULL, country_id INT NOT NULL, count INT NOT NULL, KEY `date` (`date`), UNIQUE KEY `id` (`id`), UNIQUE KEY `date_domains_location_count` ( `date`, `domains_id`, `country_id`, `count` )) ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=16;
CREATE TABLE browsers_daily    ( id INT NOT NULL AUTO_INCREMENT, date DATETIME NOT NULL, domains_id INT NOT NULL, browser_id INT NOT NULL,  count INT NOT NULL, KEY `date` (`date`),  UNIQUE KEY `id` (`id`),   UNIQUE KEY `date_domains_browser_count` ( `date`, `domains_id`, `browser_id`, `count` ))  ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=16;
CREATE TABLE devices_daily     ( id INT NOT NULL AUTO_INCREMENT, date DATETIME NOT NULL, domains_id INT NOT NULL, device_id INT NOT NULL,  count INT NOT NULL,  KEY `date` (`date`),  UNIQUE KEY `id` (`id`),   UNIQUE KEY `date_domains_devices_count` ( `date`, `domains_id`, `device_id`, `count` ))  ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=16;
CREATE TABLE oses_daily        ( id INT NOT NULL AUTO_INCREMENT, date DATETIME NOT NULL, domains_id INT NOT NULL, os_id INT NOT NULL, count INT NOT NULL, KEY `date` (`date`), UNIQUE KEY `id` (`id`), UNIQUE KEY `date_domains_os_count` ( `date`, `domains_id`, `os_id`, `count` )) ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=16;
CREATE TABLE visits_weekly     ( id INT NOT NULL AUTO_INCREMENT, date DATETIME NOT NULL, domains_id INT NOT NULL, ip_id INT NOT NULL, count INT NOT NULL, KEY `date` (`date`),        UNIQUE KEY `id` (`id`),         UNIQUE KEY `date_domains_ip_count` ( `date`, `domains_id`, `ip_id`, `count` )) ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=16;
CREATE TABLE locations_weekly  ( id INT NOT NULL AUTO_INCREMENT, date DATETIME NOT NULL, domains_id INT NOT NULL, country_id INT NOT NULL, count INT NOT NULL, KEY `date` (`date`), UNIQUE KEY `id` (`id`), UNIQUE KEY `date_domains_location_count` ( `date`, `domains_id`, `country_id`, `count` )) ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=16;
CREATE TABLE browsers_weekly   ( id INT NOT NULL AUTO_INCREMENT, date DATETIME NOT NULL, domains_id INT NOT NULL, browser_id INT NOT NULL,  count INT NOT NULL, KEY `date` (`date`),  UNIQUE KEY `id` (`id`),   UNIQUE KEY `date_domains_browser_count` ( `date`, `domains_id`, `browser_id`, `count` ))  ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=16;
CREATE TABLE devices_weekly    ( id INT NOT NULL AUTO_INCREMENT, date DATETIME NOT NULL, domains_id INT NOT NULL, device_id INT NOT NULL,  count INT NOT NULL,  KEY `date` (`date`),  UNIQUE KEY `id` (`id`),   UNIQUE KEY `date_domains_devices_count` ( `date`, `domains_id`, `device_id`, `count` ))  ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=16;
CREATE TABLE oses_weekly       ( id INT NOT NULL AUTO_INCREMENT, date DATETIME NOT NULL, domains_id INT NOT NULL, os_id INT NOT NULL, count INT NOT NULL, KEY `date` (`date`), UNIQUE KEY `id` (`id`), UNIQUE KEY `date_domains_os_count` ( `date`, `domains_id`, `os_id`, `count` )) ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=16;
CREATE TABLE visits_monthly    ( id INT NOT NULL AUTO_INCREMENT, date DATETIME NOT NULL, domains_id INT NOT NULL, ip_id INT NOT NULL, count INT NOT NULL, KEY `date` (`date`),        UNIQUE KEY `id` (`id`),         UNIQUE KEY `date_domains_ip_count` ( `date`, `domains_id`, `ip_id`, `count` )) ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=16;
CREATE TABLE locations_monthly ( id INT NOT NULL AUTO_INCREMENT, date DATETIME NOT NULL, domains_id INT NOT NULL, country_id INT NOT NULL, count INT NOT NULL, KEY `date` (`date`), UNIQUE KEY `id` (`id`), UNIQUE KEY `date_domains_location_count` ( `date`, `domains_id`, `country_id`, `count` )) ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=16;
CREATE TABLE browsers_monthly  ( id INT NOT NULL AUTO_INCREMENT, date DATETIME NOT NULL, domains_id INT NOT NULL, browser_id INT NOT NULL, count INT NOT NULL, KEY `date` (`date`),  UNIQUE KEY `id` (`id`),   UNIQUE KEY `date_domains_browser_count` ( `date`, `domains_id`, `browser_id`, `count` ))  ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=16;
CREATE TABLE devices_monthly   ( id INT NOT NULL AUTO_INCREMENT, date DATETIME NOT NULL, domains_id INT NOT NULL, device_id INT NOT NULL,  count INT NOT NULL,  KEY `date` (`date`),  UNIQUE KEY `id` (`id`),   UNIQUE KEY `date_domains_devices_count` ( `date`, `domains_id`, `device_id`, `count` ))  ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=16;
CREATE TABLE oses_monthly      ( id INT NOT NULL AUTO_INCREMENT, date DATETIME NOT NULL, domains_id INT NOT NULL, os_id INT NOT NULL, count INT NOT NULL, KEY `date` (`date`), UNIQUE KEY `id` (`id`), UNIQUE KEY `date_domains_os_count` ( `date`, `domains_id`, `os_id`, `count` )) ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=16;
CREATE TABLE visits_yearly     ( id INT NOT NULL AUTO_INCREMENT, date DATETIME NOT NULL, domains_id INT NOT NULL, ip_id INT NOT NULL, count INT NOT NULL,            KEY `date` (`date`),        UNIQUE KEY `id` (`id`),         UNIQUE KEY `date_domains_ip_count` ( `date`, `domains_id`, `ip_id`, `count` )) ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=16;
CREATE TABLE locations_yearly  ( id INT NOT NULL AUTO_INCREMENT, date DATETIME NOT NULL, domains_id INT NOT NULL, country_id INT NOT NULL, count INT NOT NULL, KEY `date` (`date`), UNIQUE KEY `id` (`id`), UNIQUE KEY `date_domains_location_count` ( `date`, `domains_id`, `country_id`, `count` )) ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=16;
CREATE TABLE browsers_yearly   ( id INT NOT NULL AUTO_INCREMENT, date DATETIME NOT NULL, domains_id INT NOT NULL, browser_id INT NOT NULL,  count INT NOT NULL,                                     KEY `date` (`date`),  UNIQUE KEY `id` (`id`),   UNIQUE KEY `date_domains_browser_count` ( `date`, `domains_id`, `browser_id`, `count` ))  ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=16;
CREATE TABLE devices_yearly    ( id INT NOT NULL AUTO_INCREMENT, date DATETIME NOT NULL, domains_id INT NOT NULL, device_id INT NOT NULL,  count INT NOT NULL,  KEY `date` (`date`),  UNIQUE KEY `id` (`id`),   UNIQUE KEY `date_domains_devices_count` ( `date`, `domains_id`, `device_id`, `count` ))  ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=16;
CREATE TABLE oses_yearly       ( id INT NOT NULL AUTO_INCREMENT, date DATETIME NOT NULL, domains_id INT NOT NULL, os_id INT NOT NULL, count INT NOT NULL, KEY `date` (`date`), UNIQUE KEY `id` (`id`), UNIQUE KEY `date_domains_os_count` ( `date`, `domains_id`, `os_id`, `count` )) ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=16; 
CREATE TABLE visits_total      ( id INT NOT NULL AUTO_INCREMENT, count INT NOT NULL, UNIQUE KEY `id` (`id`) ) ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=16;
CREATE TABLE locations_total   ( id INT NOT NULL AUTO_INCREMENT, count INT NOT NULL, UNIQUE KEY `id` (`id`) ) ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=16;
CREATE TABLE browsers_total    ( id INT NOT NULL AUTO_INCREMENT, count INT NOT NULL, UNIQUE KEY `id` (`id`) ) ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=15;
CREATE TABLE devices_total     ( id INT NOT NULL AUTO_INCREMENT, count INT NOT NULL, UNIQUE KEY `id` (`id`) ) ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=16;
CREATE TABLE oses_total        ( id INT NOT NULL AUTO_INCREMENT, count INT NOT NULL, UNIQUE KEY `id` (`id`) ) ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=16;
